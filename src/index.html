<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="style.css"/>
	<title>Document</title>
</head>
<body class="bg-slate-900">
	<script type="module">
		import '@fortawesome/fontawesome-free/css/all.css';
	</script>
	<div id="roll">
		<div id="steps">
			<div id="s0" class="step" style="position: relative;">
				<div class="flex h-full">
					<div class="bg-blue-400 w-[30vh] vertical-stripe-left relative">
						<div class="tl absolute left-0 top-0"></div>
						<div class="bl absolute left-0 bottom-0"></div>
						<div class="tr absolute right-0 top-0"></div>
						<div class="br absolute right-0 bottom-0"></div>
					</div>
					<div class="ml-5 self-center" id="central">
						<h1 class="py-3 text-transparent bg-clip-text bg-gradient-to-r from-cyan-500 to-blue-500 font-extrabold text-8xl">Bartosz Stępień</h1>
						<p class="text-3xl font-semibold text-gray-50 pb-3">A hobbyist programmer and computer enthusiast.</p>
						<a href="#" class="text-white text-xl font-medium relative -z-0 link px-1 interactable">
							<i class="fa-brands fa-github"></i>&nbsp; Check out my GitHub profile...
							<div class="-z-10 h-2 bg-gradient-to-r from-cyan-500 to-blue-500 mt-[-0.75rem] absolute left-0 right-0"></div>
						</a>
						<div class="h-1"></div>
						<a href="#" class="text-white text-xl font-medium relative -z-0 link px-1 interactable">
							<i class="fa-solid fa-envelope"></i>&nbsp; ...or contact me via e-mail
							<div class="-z-10 h-2 bg-gradient-to-r from-cyan-500 to-blue-500 mt-[-0.75rem] absolute left-0 right-0"></div>
						</a>
					</div>
					<div class="flex-1 flex pl-2">
						<div class="bg-yellow-400 w-10 vertical-stripe-right relative">
							<div class="tl absolute left-0 top-0"></div>
							<div class="bl absolute left-0 bottom-0"></div>
							<div class="tr absolute right-0 top-0"></div>
							<div class="br absolute right-0 bottom-0"></div>
						</div>
						<div class="bg-red-400 w-10 vertical-stripe-right relative delay-100">
							<div class="tl absolute left-0 top-0"></div>
							<div class="bl absolute left-0 bottom-0"></div>
							<div class="tr absolute right-0 top-0"></div>
							<div class="br absolute right-0 bottom-0"></div>
						</div>
						<div class="bg-green-400 w-10 vertical-stripe-right relative delay-200">
							<div class="tl absolute left-0 top-0"></div>
							<div class="bl absolute left-0 bottom-0"></div>
							<div class="tr absolute right-0 top-0"></div>
							<div class="br absolute right-0 bottom-0"></div>
						</div>
						<div class="w-full h-[104.4vh] relative delay-300" id="thumbnail">
							<img class="w-full h-[104.4vh] object-cover" src="img/bg.jpg" alt="test">
							<div class="tl absolute left-0 top-0"></div>
							<div class="bl absolute left-0 bottom-0"></div>
							<div class="tr absolute right-0 top-0"></div>
							<div class="br absolute right-0 bottom-0"></div>
						</div>
					</div>
				</div>
				<div class="text-white absolute bottom-6 flex w-[300px]" id="scrolldown">
					<div class="mouse"></div>
				</div>
			</div>
			<div id="s1" class="step">
				<div class="flex h-full items-center">
					<div class="bg-red-400 w-[30vh] vertical-stripe-left relative flex-shrink-0">
						<div class="tl absolute left-0 top-0"></div>
						<div class="bl absolute left-0 bottom-0"></div>
						<div class="tr absolute right-0 top-0"></div>
						<div class="br absolute right-0 bottom-0"></div>
					</div>
					<div class="flex divide-x-2">
						<div class="text-justify flex-1 pr-8">
							<h1 class="py-3 text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-red-800 font-extrabold text-7xl">About me</h1>
							<p class="text-xl font-medium text-gray-50 pb-3">Ever since I remember, I've always been interested in computers. When I was a little kid I'd often gaze in awe at various programs yearning to be able to make one myself. Hence my dream of becoming a programmer.</p>
							<p class="text-xl font-medium text-gray-50 pb-3">My journey began at the age of 12 when I started experimenting with C++. After making some small projects and getting the hang of the fundamentals, I moved on to other languages like C#, Python and JavaScript.</p>
							<p class="text-xl font-medium text-gray-50 pb-3">Now I'm 18 years old. I've never lost my childhood passion and am still keen on extending my current knowledge and developing new abilities. Below are some of the projects I've made. They are a testimony of everything I've learned throughout this few years.</p>
						</div>
						<div class="flex-1 pl-8">
							<h1 class="py-3 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-yellow-800 font-extrabold text-7xl">My skills</h1>
							<p class="text-white text-xl font-medium mb-2">Technology</p>
							<div class="flex flex-col gap-2">
								<div class="flex bg-slate-800 text-white items-center text-lg px-4 py-2 rounded-sm shadow">
									<i class="fa-brands fa-python text-blue-500 text-4xl"></i>
									<p class="ml-4">Python</p>
									<p class="ml-2 text-slate-500 text-base">(Flask, requests, BeautifulSoup)</p>
									<p class="ml-auto">intermediate</p>
								</div>
								<div class="flex bg-slate-800 text-white items-center text-lg px-4 py-2 rounded-sm shadow">
									<i class="fa-brands fa-js text-yellow-400 text-4xl"></i>
									<p class="ml-4">JavaScript</p>
									<p class="ml-2 text-slate-500 text-base">(Tailwind, React Native, Svelte)</p>
									<p class="ml-auto">intermediate</p>
								</div>
								<div class="flex bg-slate-800 text-white items-center text-lg px-4 py-2 rounded-sm shadow">
									<p>C++</p>
									<p class="ml-auto">intermediate</p>
								</div>
								<div class="flex bg-slate-800 text-white items-center text-lg px-4 py-2 rounded-sm shadow">
									<p>C#</p>
									<p class="ml-auto">basic</p>
								</div>
							</div>
							<p class="text-white text-xl font-medium mt-4 mb-2">Languages</p>
							<div class="flex flex-col gap-2">
								<div class="flex bg-slate-800 text-white items-center text-lg px-4 py-2 rounded-sm shadow">
									<p>English</p>
									<p class="ml-auto">fluent (C1)</p>
								</div>
								<div class="flex bg-slate-800 text-white items-center text-lg px-4 py-2 rounded-sm shadow">
									<p>German</p>
									<p class="ml-auto">intermediate (B1)</p>
								</div>
							</div>
						</div>
					</div>
					<div class="bg-yellow-400 w-[30vh] vertical-stripe-right relative flex-shrink-0">
						<div class="tl absolute left-0 top-0"></div>
						<div class="bl absolute left-0 bottom-0"></div>
						<div class="tr absolute right-0 top-0"></div>
						<div class="br absolute right-0 bottom-0"></div>
					</div>
				</div>
			</div>
			<div id="s2" class="step">How's it going</div>
		</div>
		<div id="wrapper" class="z-50">
			<div id="pane"></div>
		</div>
	</div>
	<script type="module">
		import Roll from "rolljs";

		var roll = Roll.DOM("#wrapper", "#pane", "#steps", ".step", 100);

		var views = document.querySelectorAll(".step");
		views[0].className = "step curr";

		roll.on("step", Roll.stepHandler(roll, views, "prev", "next", "curr", true));

		let width = document.querySelector('#thumbnail').clientWidth;
		document.querySelector('#scrolldown').style.left = `calc((100vw - 7.5rem - ${width}px) / 2)`;

		function inside(point, vs) {			
			var x = point[0], y = point[1];
			
			var inside = false;
			for (var i = 0, j = vs.length - 1; i < vs.length; j = i++) {
				var xi = vs[i][0], yi = vs[i][1];
				var xj = vs[j][0], yj = vs[j][1];
				
				var intersect = ((yi > y) != (yj > y))
					&& (x < (xj - xi) * (y - yi) / (yj - yi) + xi);
				if (intersect) inside = !inside;
			}
			
			return inside;
		};

		let stripesList = [...document.querySelectorAll('.vertical-stripe-right')];
		stripesList.push(document.querySelector('#thumbnail'));
		stripesList.reverse();

		let currentRollProgress = 0;

		window.addEventListener('mousemove', function(e) {
			if(currentRollProgress !== 0) return;
			let check = false;

			for(const stripe of stripesList) {
				if(!check) {
					var polygon = [
						[stripe.querySelector('.bl').getBoundingClientRect().x, stripe.querySelector('.bl').getBoundingClientRect().y],
						[stripe.querySelector('.br').getBoundingClientRect().x, stripe.querySelector('.br').getBoundingClientRect().y],
						[stripe.querySelector('.tr').getBoundingClientRect().x, stripe.querySelector('.tr').getBoundingClientRect().y],
						[stripe.querySelector('.tl').getBoundingClientRect().x, stripe.querySelector('.tl').getBoundingClientRect().y],
					];

					check |= inside([e.x, e.y], polygon);
				}

				if(!check) stripe.style.setProperty('--offset', '0');
				else stripe.style.setProperty('--offset', '-1.1rem');
			}

			var polygon = [
				[document.querySelector('.vertical-stripe-left').querySelector('.bl').getBoundingClientRect().x, document.querySelector('.vertical-stripe-left').querySelector('.bl').getBoundingClientRect().y],
				[document.querySelector('.vertical-stripe-left').querySelector('.br').getBoundingClientRect().x, document.querySelector('.vertical-stripe-left').querySelector('.br').getBoundingClientRect().y],
				[document.querySelector('.vertical-stripe-left').querySelector('.tr').getBoundingClientRect().x, document.querySelector('.vertical-stripe-left').querySelector('.tr').getBoundingClientRect().y],
				[document.querySelector('.vertical-stripe-left').querySelector('.tl').getBoundingClientRect().x, document.querySelector('.vertical-stripe-left').querySelector('.tl').getBoundingClientRect().y],
			];

			if(inside([e.x, e.y], polygon)) {
				document.querySelector('.vertical-stripe-left').style.setProperty('--offset', '1.1rem');
			} else {
				document.querySelector('.vertical-stripe-left').style.setProperty('--offset', '0');
			}
		});

		roll.on('roll', (step, stepProgress, position, totalProgress) => {
			let full = (window.innerWidth - 120 - width) / 2;
			currentRollProgress = stepProgress;

			if(stepProgress === 0) document.querySelector('.vertical-stripe-left').classList.add('transition');
			else document.querySelector('.vertical-stripe-left').classList.remove('transition');
			document.querySelector('.vertical-stripe-left').style.setProperty('--offset', full * stepProgress + 'px');
			console.log(full * stepProgress + 'px')

			for(const stripe of stripesList) {
				if(stepProgress === 0) {
					stripe.classList.add('transition');
					stripe.classList.remove('cancel-delay');
				}
				else {
					stripe.classList.remove('transition');
					stripe.classList.add('cancel-delay')
				}

				if(stripe.id !== 'thumbnail') {
					stripe.style.setProperty('--offset', -full * stepProgress + 'px');
				} else {
					stripe.style.setProperty('--offset', -full * stepProgress + 'px');
				}
			}

			//document.querySelector('#thumbnail').style.setProperty('--scale', 1.09 + stepProgress + '');

			document.querySelector('#central').style.setProperty('--offset', -20 * stepProgress + 'rem');
			document.querySelector('#central').style.setProperty('--opacity', 1 - 2 * stepProgress + '');

			document.querySelector('#scrolldown').style.setProperty('--opacity', 1 - 2 * stepProgress + '');
		});

		// library bug fix
		let firstStep = true;

		roll.on('step', function(curr, last) {
			if(firstStep) {
				firstStep = false;
				return;
			}
			document.querySelector('#wrapper').scrollTo({ top: curr * (200 + window.innerHeight), behavior: 'smooth' });
			// temporarily disable scrolling
			console.log('dupa chuj');
			document.querySelector('#wrapper').classList.add('no-scrolling');
			setTimeout(() => document.querySelector('#wrapper').classList.remove('no-scrolling'), 200);
		});
	</script>
</body>
</html>